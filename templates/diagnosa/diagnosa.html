<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <title>StayHealthy - Diagnosis</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/css/style.css" />
  </head>

  <body>
    <!-- ================= NAVBAR ================= -->
    <nav class="navbar navbar-expand-lg navbar-custom px-4">
      <a class="navbar-brand d-flex align-items-center" href="#">
        <img
          src="/static/asset/img/pws.png"
          alt="Logo StayHealthy"
          class="logo"
        />
      </a>

      <div class="collapse navbar-collapse justify-content-end">
        <ul class="navbar-nav me-3">
          <li class="nav-item"><a class="nav-link" href="/templates/index.html">Home</a></li>
          <li class="nav-item">
            <a class="nav-link" href="/templates/diagnosa/hasil_diagnosa.html">Hasil Diagnosa</a>
          </li>
        </ul>
        <a href="/templates/profile/profile.html" class="btn btn-login">Login</a>
      </div>
    </nav>

    <div class="header-pink"></div>

    <div class="container my-4" id="app"></div>

    <!-- ================= FOOTER ================= -->
    <footer>
      Copyright Â© 2026 StayHealthy. All rights reserved.<br />
      Terms of Use | Privacy Policy | Cookie Policy
    </footer>

    <!-- ================= JAVASCRIPT ================= -->
    <script>
      const pertanyaan = [
        "Apakah pasien mengalami kejang otot yang tidak dapat dikendalikan?",
        "Apakah pasien mengalami kontraksi otot yang terjadi secara tiba-tiba dan tidak disengaja?",
        "Apakah pasien mengalami Kekakuan pada otot?",
        "Apakah pasien mengalami Keterlambatan dalam mencapai tonggak perkembangan motorik seperti merangkak atau berjalan?",
        "Apakah pasien mengalami Ketidakmampuan berjalan atau berjalan dengan bantuan perangkat?",
        "Apakah pasien mengalami Hiperrefleksia atau hiporefleksia?",
        "Apakah pasien mengalami Gerakan kaku atau tidak alami?",
        "Apakah pasien mengalami Keterlambatan perkembangan motorik?",
        "Apakah pasien mengalami Kesulitan mengendalikan gerakan tubuh?",
        "Apakah pasien mengalami Gangguan gerakan refleks?",
        "Apakah pasien mengalami Gangguan bicara?",
        "Apakah pasien mengalami Kejang atau epilepsi?",
        "Apakah pasien mengalami Kesulitan mengontrol buang air kecil?",
        "Apakah pasien mengalami Gangguan sensorik?",
        "Apakah pasien mengalami Gerakan tubuh tidak terkoordinasi?",
        "Apakah pasien mengalami Gangguan keseimbangan?",
        "Apakah pasien mengalami Kesulitan menjaga posisi tubuh?",
        "Apakah pasien mengalami Kesulitan menelan?",
        "Apakah pasien mengalami Gangguan mengunyah?",
        "Apakah pasien mengalami Kelainan postur?",
        "Apakah pasien mengalami Masalah koordinasi?",
        "Apakah pasien mengalami Gangguan motorik halus?",
        "Apakah pasien mengalami Kontraktur otot?",
        "Apakah pasien sering jatuh?",
        "Apakah pasien mengalami Kelemahan otot?",
      ];

      let currentStep = 1;
      let jawaban = {};
      const app = document.getElementById("app");

      function render() {
        app.innerHTML = "";

        let start = (currentStep - 1) * 5;
        let end = start + 5;

        app.innerHTML += `<h5>Step ${currentStep} dari 5</h5>`;

        for (let i = start; i < end; i++) {
          let no = i + 1;
          let nilai = jawaban[no] ?? 0;
          let percent = nilai * 100;

          app.innerHTML += `
        <div class="question-box">
            <p class="question-title">Pertanyaan ${no}</p>
            <p>${pertanyaan[i]}</p>

            <button class="btn btn-answer me-2" onclick="jawabYa(${no})">Ya</button>
            <button class="btn btn-answer" onclick="jawabTidak(${no})">Tidak</button>

            <div id="range-${no}" class="mt-3 ${nilai > 0 ? "" : "d-none"}">
                <input type="range"
                    class="form-range custom-range"
                    min="0" max="1" step="0.1"
                    value="${nilai}"
                    style="background: linear-gradient(to right,#0d6efd ${percent}%,#e0e0e0 ${percent}%)"
                    oninput="updateRange(${no}, this)">
                <p>Nilai: <span id="nilai-${no}">${nilai}</span></p>
            </div>
        </div>`;
        }

        app.innerHTML += `
    <div class="text-end mt-3">
        ${
          currentStep > 1
            ? `<button class="btn btn-secondary me-2" onclick="prevStep()">Sebelumnya</button>`
            : ``
        }
        ${
          currentStep < 5
            ? `<button class="btn btn-next" onclick="nextStep()">Selanjutnya</button>`
            : `<button class="btn btn-next" onclick="window.location.href='hasil_diagnosa.html'">Lihat Hasil</button>`
        }

    </div>`;
      }

      function jawabYa(no) {
        document.getElementById(`range-${no}`).classList.remove("d-none");
      }

      function jawabTidak(no) {
        document.getElementById(`range-${no}`).classList.add("d-none");
        jawaban[no] = 0;
        document.getElementById(`nilai-${no}`).innerText = 0;
      }

      function updateRange(no, slider) {
        let percent = slider.value * 100;

        slider.style.background = `linear-gradient(to right,#0d6efd ${percent}%,#e0e0e0 ${percent}%)`;

        jawaban[no] = slider.value;
        document.getElementById(`nilai-${no}`).innerText = slider.value;
      }

      function nextStep() {
        currentStep++;
        render();
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      function prevStep() {
        if (currentStep > 1) {
          currentStep--;
          render();
          window.scrollTo({ top: 0, behavior: "smooth" });
        }
      }

      function lihatHasil() {
        let total = 0;
        for (let i = 1; i <= 25; i++) {
          total += parseFloat(jawaban[i] || 0);
        }
        alert("Total skor: " + total.toFixed(2));
      }

      render();
    </script>

    <script>
      function updateRange(no, slider) {
        let percent = slider.value * 100;

        slider.style.background = `linear-gradient(to right, #0d6efd ${percent}%, #e0e0e0 ${percent}%)`;

        document.getElementById(`nilai-${no}`).innerText = slider.value;
        jawaban[no] = slider.value;
      }
    </script>
  </body>
</html>
